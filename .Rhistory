Total_Deaths = sum(deaths_change, na.rm = TRUE),
Total_Vaccinated = sum(people_vaccinated_change, na.rm = TRUE),
Total_Fully_Vaccinated = sum(people_fully_vaccinated_change, na.rm = TRUE),
Mean_Daily_Deaths = mean(deaths_change, na.rm = TRUE),
Median_Daily_Deaths = median(deaths_change, na.rm = TRUE),
Mean_Daily_Vaccinated = mean(people_vaccinated_change, na.rm = TRUE),
Median_Daily_Vaccinated = median(people_vaccinated_change, na.rm = TRUE),
Mean_Daily_Fully_Vaccinated = mean(people_fully_vaccinated_change, na.rm = TRUE),
Median_Daily_Fully_Vaccinated = median(people_fully_vaccinated_change, na.rm = TRUE)
)
# Correlation based on daily changes
correlation <- cor(us_data$people_fully_vaccinated_change, us_data$deaths_change, use = "complete.obs")
summary_stats_us$Correlation_FullyVaccinated_Deaths <- round(correlation, 3)
# Basic ICU stats per country
icu_summary <- icu_data %>%
filter(!(country %in% c("China", "Singapore"))) %>%
arrange(country, date) %>%
group_by(country) %>%
mutate(
prev_icu = lag(icu_patients),
icu_increase = ifelse(!is.na(prev_icu) & icu_patients > prev_icu, icu_patients - prev_icu, 0)
) %>%
summarise(
Country = first(country),
`Total ICU Patients` = format(sum(icu_increase, na.rm = TRUE), big.mark = ",", scientific = FALSE),
`Max ICU Patients` = format(max(icu_patients, na.rm = TRUE), big.mark = ",", scientific = FALSE)
) %>%
select(Country, `Total ICU Patients`, `Max ICU Patients`) %>%
arrange(desc(`Max ICU Patients`))
# Display Summary Statistics Table ----
# Summary of Monthly COVID-19 Cases by Country
kable(case_summary,
caption = "Summary of Total and Peak Monthly COVID-19 Cases by Country",
align = c("l", "r", "r", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# US COVID-19 Vaccination and Death Summary
# Convert to long format and clean labels
summary_stats_us_long <- summary_stats_us %>%
pivot_longer(everything(), names_to = "Metric", values_to = "Value") %>%
mutate(
Metric = gsub("_", " ", Metric),
Metric = gsub("(?<=[a-z])(?=[A-Z])", " ", Metric, perl = TRUE),
Metric = toTitleCase(tolower(Metric)),
Value = formatC(as.numeric(Value), format = "f", digits = 2, big.mark = ",", drop0trailing = TRUE)
)
# Render formatted table
kable(summary_stats_us_long,
caption = "US COVID-19 Vaccination and Death Summary (Using Daily Changes)",
align = c("l", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# ICU Response to COVID-19 Waves by Country
kable(icu_summary, caption = "ICU Response to COVID-19 Waves by Country",
align = c("l", "r", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), full_width = FALSE)
# Load Required Libraries ----
library(readr)
library(dplyr)
library(knitr)
library(kableExtra)
library(tidyr)
library(tools)
library(scales)
# Load Cleaned Data ----
# Load the cleaned dataset prepared in the tided folder
jh_cases <- read_csv("tidied_data/jh_confirmed_cases_country_level.csv")
us_data <- read_csv("tidied_data/covid_datahub_USA_filtered.csv")
icu_data <- read_csv("tidied_data/owid_covid_data_filtered_final.csv")
# Create Summary Statistics Table ----
# Daily Case Trends Across Countries - Total cases per country
case_summary <- jh_cases %>%
group_by(`Country/Region`) %>%
summarise(
`Total Cases` = sum(new_cases, na.rm = TRUE),
`Peak Increase` = max(new_cases, na.rm = TRUE),
`Peak Date` = year_month[which.max(new_cases)]
) %>%
mutate(
`Total Cases` = comma(`Total Cases`),
`Peak Increase` = comma(`Peak Increase`)
) %>%
arrange(desc(`Total Cases`))
# Vaccination vs Death Rates in the US
summary_stats_us <- us_data %>%
summarise(
Total_Deaths = sum(deaths_change, na.rm = TRUE),
Total_Vaccinated = sum(people_vaccinated_change, na.rm = TRUE),
Total_Fully_Vaccinated = sum(people_fully_vaccinated_change, na.rm = TRUE),
Mean_Daily_Deaths = mean(deaths_change, na.rm = TRUE),
Median_Daily_Deaths = median(deaths_change, na.rm = TRUE),
Mean_Daily_Vaccinated = mean(people_vaccinated_change, na.rm = TRUE),
Median_Daily_Vaccinated = median(people_vaccinated_change, na.rm = TRUE),
Mean_Daily_Fully_Vaccinated = mean(people_fully_vaccinated_change, na.rm = TRUE),
Median_Daily_Fully_Vaccinated = median(people_fully_vaccinated_change, na.rm = TRUE)
)
# Correlation based on daily changes
correlation <- cor(us_data$people_fully_vaccinated_change, us_data$deaths_change, use = "complete.obs")
summary_stats_us$Correlation_FullyVaccinated_Deaths <- round(correlation, 3)
# Basic ICU stats per country
icu_summary <- icu_data %>%
filter(!(country %in% c("China", "Singapore"))) %>%
arrange(country, date) %>%
group_by(country) %>%
mutate(
prev_icu = lag(icu_patients),
icu_increase = ifelse(!is.na(prev_icu) & icu_patients > prev_icu, icu_patients - prev_icu, 0)
) %>%
summarise(
Country = first(country),
`Total ICU Patients` = format(sum(icu_increase, na.rm = TRUE), big.mark = ",", scientific = FALSE),
`Max ICU Patients` = format(max(icu_patients, na.rm = TRUE), big.mark = ",", scientific = FALSE)
) %>%
select(Country, `Total ICU Patients`, `Max ICU Patients`) %>%
arrange(desc(`Max ICU Patients`))
# Display Summary Statistics Table ----
# Summary of Monthly COVID-19 Cases by Country
kable(case_summary,
caption = "Summary of Total and Peak Monthly COVID-19 Cases by Country",
align = c("l", "r", "r", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# US COVID-19 Vaccination and Death Summary
# Convert to long format and clean labels
summary_stats_us_long <- summary_stats_us %>%
pivot_longer(everything(), names_to = "Metric", values_to = "Value") %>%
mutate(
Metric = gsub("_", " ", Metric),
Metric = gsub("(?<=[a-z])(?=[A-Z])", " ", Metric, perl = TRUE),
Metric = toTitleCase(tolower(Metric)),
Value = formatC(as.numeric(Value), format = "f", digits = 2, big.mark = ",", drop0trailing = TRUE)
)
# Render formatted table
kable(summary_stats_us_long,
caption = "US COVID-19 Vaccination and Death Summary (Using Daily Changes)",
align = c("l", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# ICU Response to COVID-19 Waves by Country
kable(icu_summary, caption = "ICU Response to COVID-19 Waves by Country",
align = c("l", "r", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), full_width = FALSE)
# Load Required Libraries ----
library(readr)
library(dplyr)
library(knitr)
library(kableExtra)
library(tidyr)
library(tools)
library(scales)
# Load Cleaned Data ----
# Load the cleaned dataset prepared in the tided folder
jh_cases <- read_csv("tidied_data/jh_confirmed_cases_country_level.csv")
us_data <- read_csv("tidied_data/covid_datahub_USA_filtered.csv")
icu_data <- read_csv("tidied_data/owid_covid_data_filtered_final.csv")
# Create Summary Statistics Table ----
# Daily Case Trends Across Countries - Total cases per country
case_summary <- jh_cases %>%
group_by(`Country/Region`) %>%
summarise(
`Total Cases` = sum(new_cases, na.rm = TRUE),
`Peak Increase` = max(new_cases, na.rm = TRUE),
`Peak Date` = year_month[which.max(new_cases)]
) %>%
mutate(
`Total Cases` = comma(`Total Cases`),
`Peak Increase` = comma(`Peak Increase`)
) %>%
arrange(desc(`Total Cases`))
# Vaccination vs Death Rates in the US
summary_stats_us <- us_data %>%
summarise(
Total_Deaths = sum(deaths_change, na.rm = TRUE),
Total_Vaccinated = sum(people_vaccinated_change, na.rm = TRUE),
Total_Fully_Vaccinated = sum(people_fully_vaccinated_change, na.rm = TRUE),
Mean_Daily_Deaths = mean(deaths_change, na.rm = TRUE),
Median_Daily_Deaths = median(deaths_change, na.rm = TRUE),
Mean_Daily_Vaccinated = mean(people_vaccinated_change, na.rm = TRUE),
Median_Daily_Vaccinated = median(people_vaccinated_change, na.rm = TRUE),
Mean_Daily_Fully_Vaccinated = mean(people_fully_vaccinated_change, na.rm = TRUE),
Median_Daily_Fully_Vaccinated = median(people_fully_vaccinated_change, na.rm = TRUE)
)
# Correlation based on daily changes
correlation <- cor(us_data$people_fully_vaccinated_change, us_data$deaths_change, use = "complete.obs")
summary_stats_us$Correlation_FullyVaccinated_Deaths <- round(correlation, 3)
# Basic ICU stats per country
icu_summary <- icu_data %>%
filter(!(country %in% c("China", "Singapore"))) %>%
arrange(country, date) %>%
group_by(country) %>%
mutate(
prev_icu = lag(icu_patients),
icu_increase = ifelse(!is.na(prev_icu) & icu_patients > prev_icu, icu_patients - prev_icu, 0)
) %>%
summarise(
Country = first(country),
`Total ICU Patients` = format(sum(icu_increase, na.rm = TRUE), big.mark = ",", scientific = FALSE),
`Max ICU Patients` = format(max(icu_patients, na.rm = TRUE), big.mark = ",", scientific = FALSE),
`Peak Date` = date[which.max(icu_patients)]
) %>%
select(Country, `Total ICU Patients`, `Max ICU Patients`) %>%
arrange(desc(`Max ICU Patients`))
# Display Summary Statistics Table ----
# Summary of Monthly COVID-19 Cases by Country
kable(case_summary,
caption = "Summary of Total and Peak Monthly COVID-19 Cases by Country",
align = c("l", "r", "r", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# US COVID-19 Vaccination and Death Summary
# Convert to long format and clean labels
summary_stats_us_long <- summary_stats_us %>%
pivot_longer(everything(), names_to = "Metric", values_to = "Value") %>%
mutate(
Metric = gsub("_", " ", Metric),
Metric = gsub("(?<=[a-z])(?=[A-Z])", " ", Metric, perl = TRUE),
Metric = toTitleCase(tolower(Metric)),
Value = formatC(as.numeric(Value), format = "f", digits = 2, big.mark = ",", drop0trailing = TRUE)
)
# Render formatted table
kable(summary_stats_us_long,
caption = "US COVID-19 Vaccination and Death Summary (Using Daily Changes)",
align = c("l", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# ICU Response to COVID-19 Waves by Country
kable(icu_summary, caption = "ICU Response to COVID-19 Waves by Country",
align = c("l", "r", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), full_width = FALSE)
# Load Required Libraries ----
library(readr)
library(dplyr)
library(knitr)
library(kableExtra)
library(tidyr)
library(tools)
library(scales)
# Load Cleaned Data ----
# Load the cleaned dataset prepared in the tided folder
jh_cases <- read_csv("tidied_data/jh_confirmed_cases_country_level.csv")
us_data <- read_csv("tidied_data/covid_datahub_USA_filtered.csv")
icu_data <- read_csv("tidied_data/owid_covid_data_filtered_final.csv")
# Create Summary Statistics Table ----
# Daily Case Trends Across Countries - Total cases per country
case_summary <- jh_cases %>%
group_by(`Country/Region`) %>%
summarise(
`Total Cases` = sum(new_cases, na.rm = TRUE),
`Peak Increase` = max(new_cases, na.rm = TRUE),
`Peak Date` = year_month[which.max(new_cases)]
) %>%
mutate(
`Total Cases` = comma(`Total Cases`),
`Peak Increase` = comma(`Peak Increase`)
) %>%
arrange(desc(`Total Cases`))
# Vaccination vs Death Rates in the US
summary_stats_us <- us_data %>%
summarise(
Total_Deaths = sum(deaths_change, na.rm = TRUE),
Total_Vaccinated = sum(people_vaccinated_change, na.rm = TRUE),
Total_Fully_Vaccinated = sum(people_fully_vaccinated_change, na.rm = TRUE),
Mean_Daily_Deaths = mean(deaths_change, na.rm = TRUE),
Median_Daily_Deaths = median(deaths_change, na.rm = TRUE),
Mean_Daily_Vaccinated = mean(people_vaccinated_change, na.rm = TRUE),
Median_Daily_Vaccinated = median(people_vaccinated_change, na.rm = TRUE),
Mean_Daily_Fully_Vaccinated = mean(people_fully_vaccinated_change, na.rm = TRUE),
Median_Daily_Fully_Vaccinated = median(people_fully_vaccinated_change, na.rm = TRUE)
)
# Correlation based on daily changes
correlation <- cor(us_data$people_fully_vaccinated_change, us_data$deaths_change, use = "complete.obs")
summary_stats_us$Correlation_FullyVaccinated_Deaths <- round(correlation, 3)
# Basic ICU stats per country
icu_summary <- icu_data %>%
filter(!(country %in% c("China", "Singapore"))) %>%
arrange(country, date) %>%
group_by(country) %>%
mutate(
prev_icu = lag(icu_patients),
icu_increase = ifelse(!is.na(prev_icu) & icu_patients > prev_icu, icu_patients - prev_icu, 0)
) %>%
summarise(
Country = first(country),
`Total ICU Patients` = format(sum(icu_increase, na.rm = TRUE), big.mark = ",", scientific = FALSE),
`Max ICU Patients` = format(max(icu_patients, na.rm = TRUE), big.mark = ",", scientific = FALSE),
`Peak Date` = date[which.max(icu_patients)]
) %>%
select(Country, `Total ICU Patients`, `Max ICU Patients`) %>%
arrange(desc(`Max ICU Patients`))
# Display Summary Statistics Table ----
# Summary of Monthly COVID-19 Cases by Country
kable(case_summary,
caption = "Summary of Total and Peak Monthly COVID-19 Cases by Country",
align = c("l", "r", "r", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# US COVID-19 Vaccination and Death Summary
# Convert to long format and clean labels
summary_stats_us_long <- summary_stats_us %>%
pivot_longer(everything(), names_to = "Metric", values_to = "Value") %>%
mutate(
Metric = gsub("_", " ", Metric),
Metric = gsub("(?<=[a-z])(?=[A-Z])", " ", Metric, perl = TRUE),
Metric = toTitleCase(tolower(Metric)),
Value = formatC(as.numeric(Value), format = "f", digits = 2, big.mark = ",", drop0trailing = TRUE)
)
# Render formatted table
kable(summary_stats_us_long,
caption = "US COVID-19 Vaccination and Death Summary (Using Daily Changes)",
align = c("l", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# ICU Response to COVID-19 Waves by Country
kable(icu_summary, caption = "ICU Response to COVID-19 Waves by Country",
align = c("l", "r", "r","r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), full_width = FALSE)
# Load Required Libraries ----
library(readr)
library(dplyr)
library(knitr)
library(kableExtra)
library(tidyr)
library(tools)
library(scales)
# Load Cleaned Data ----
# Load the cleaned dataset prepared in the tided folder
jh_cases <- read_csv("tidied_data/jh_confirmed_cases_country_level.csv")
us_data <- read_csv("tidied_data/covid_datahub_USA_filtered.csv")
icu_data <- read_csv("tidied_data/owid_covid_data_filtered_final.csv")
# Create Summary Statistics Table ----
# Daily Case Trends Across Countries - Total cases per country
case_summary <- jh_cases %>%
group_by(`Country/Region`) %>%
summarise(
`Total Cases` = sum(new_cases, na.rm = TRUE),
`Peak Increase` = max(new_cases, na.rm = TRUE),
`Peak Date` = year_month[which.max(new_cases)]
) %>%
mutate(
`Total Cases` = comma(`Total Cases`),
`Peak Increase` = comma(`Peak Increase`)
) %>%
arrange(desc(`Total Cases`))
# Vaccination vs Death Rates in the US
summary_stats_us <- us_data %>%
summarise(
Total_Deaths = sum(deaths_change, na.rm = TRUE),
Total_Vaccinated = sum(people_vaccinated_change, na.rm = TRUE),
Total_Fully_Vaccinated = sum(people_fully_vaccinated_change, na.rm = TRUE),
Mean_Daily_Deaths = mean(deaths_change, na.rm = TRUE),
Median_Daily_Deaths = median(deaths_change, na.rm = TRUE),
Mean_Daily_Vaccinated = mean(people_vaccinated_change, na.rm = TRUE),
Median_Daily_Vaccinated = median(people_vaccinated_change, na.rm = TRUE),
Mean_Daily_Fully_Vaccinated = mean(people_fully_vaccinated_change, na.rm = TRUE),
Median_Daily_Fully_Vaccinated = median(people_fully_vaccinated_change, na.rm = TRUE)
)
# Correlation based on daily changes
correlation <- cor(us_data$people_fully_vaccinated_change, us_data$deaths_change, use = "complete.obs")
summary_stats_us$Correlation_FullyVaccinated_Deaths <- round(correlation, 3)
# Basic ICU stats per country
icu_summary <- icu_data %>%
filter(!(country %in% c("China", "Singapore"))) %>%
arrange(country, date) %>%
group_by(country) %>%
mutate(
prev_icu = lag(icu_patients),
icu_increase = ifelse(!is.na(prev_icu) & icu_patients > prev_icu, icu_patients - prev_icu, 0)
) %>%
summarise(
Country = first(country),
`Total ICU Patients` = format(sum(icu_increase, na.rm = TRUE), big.mark = ",", scientific = FALSE),
`Max ICU Patients` = format(max(icu_patients, na.rm = TRUE), big.mark = ",", scientific = FALSE),
`Peak Date` = date[which.max(icu_patients)]
) %>%
select(Country, `Total ICU Patients`, `Max ICU Patients`,`Peak Date` ) %>%
arrange(desc(`Max ICU Patients`))
# Display Summary Statistics Table ----
# Summary of Monthly COVID-19 Cases by Country
kable(case_summary,
caption = "Summary of Total and Peak Monthly COVID-19 Cases by Country",
align = c("l", "r", "r", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# US COVID-19 Vaccination and Death Summary
# Convert to long format and clean labels
summary_stats_us_long <- summary_stats_us %>%
pivot_longer(everything(), names_to = "Metric", values_to = "Value") %>%
mutate(
Metric = gsub("_", " ", Metric),
Metric = gsub("(?<=[a-z])(?=[A-Z])", " ", Metric, perl = TRUE),
Metric = toTitleCase(tolower(Metric)),
Value = formatC(as.numeric(Value), format = "f", digits = 2, big.mark = ",", drop0trailing = TRUE)
)
# Render formatted table
kable(summary_stats_us_long,
caption = "US COVID-19 Vaccination and Death Summary (Using Daily Changes)",
align = c("l", "r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"),
latex_options = "scale_down",
full_width = FALSE)
# ICU Response to COVID-19 Waves by Country
kable(icu_summary, caption = "ICU Response to COVID-19 Waves by Country",
align = c("l", "r", "r","r")) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"), full_width = FALSE)
# Load required packages ----
library(ggplot2)
library(dplyr)
library(tidyverse)
library(lubridate)
# How did daily COVID-19 case counts evolve across countries over time? ----
# Create a line plot to represent the cases for each of the 5 countries
# Calculate new Yearly cases ----
covidTidy <- read_csv("tidied_data/owid_covid_data_filtered_final.csv") %>%
group_by(country) %>%
mutate(
date = as.Date(date),
timepoint = row_number(),
new_cases = case_when(
timepoint == 1 ~ 0,
.default =  total_cases - lag(total_cases)
)
) %>%
select(-timepoint)
ggplot(covidTidy, aes(x = date, y = new_cases, color = country)) +
geom_line(size = 0.5) +
scale_color_viridis_d(option = "plasma", begin = 0.1, end = 0.9) +
labs(
x = "Year",
y = "Yearly Cases",
color = "Country/Region",
) +
scale_y_continuous(labels = scales::percent_format(
scale = 0.001,
suffix = "k"
)) +
theme_minimal() +
theme(
legend.position = "top"
) +
facet_wrap(~ country, scales = "free_y", ncol = 2)
# What is the relationship between vaccination rates and death rates in the US? ----
# Create a scatter plot to represent the relationship between vaccination rates and death rates in the US.
# Reshape US data ----
# Calculate the percentages of the fully vaccinated individuals.
# Calculate the death rates per 100k people.
covidUSA <- read_csv("tidied_data/covid_datahub_USA_filtered.csv") %>%
mutate(
date = as.Date(date),
pct_fully_vaccinated = (people_fully_vaccinated / 335000000) * 100,
daily_deaths = deaths - lag(deaths),
death_rate_per_100k = (daily_deaths / 335000000) * 100000,
year_date = as.factor(year(date))
) %>%
filter(pct_fully_vaccinated > 0, daily_deaths > 0)
ggplot(covidUSA, aes(x = pct_fully_vaccinated, y = death_rate_per_100k, color = year_date)) +
geom_point(alpha = 0.5, size = 2) +
scale_color_viridis_d(option = "plasma", begin = 0.1, end = 0.9) +
geom_smooth(method = "loess", se = FALSE, color = "#0072B2") +
labs(
x = "% Fully Vaccinated",
y = "Deaths per 100,000 People",
color = "Year"
) +
theme_bw() +
theme(
legend.position = "top"
)
# How did ICU occupancy change during pandemic surges? ----
# Create a grouped bar chart showing ICU patients for each of the three countries.
# Highlight the delta and Omicron surges
# Data Wrangling ----
# Filter the three countries to focus on
# Change the date format to month and year
covid_ICU <- read_csv("tidied_data/owid_covid_data_filtered_final.csv") %>%
mutate(
date = as.Date(date),
date_ym =  as.Date(format(date, "%Y-%m-01"))
) %>%
filter(country %in% c("United States", "United Kingdom", "Canada")) %>%
group_by(country, date_ym) %>%
summarise(icu_patients = sum(icu_patients, na.rm = TRUE), .groups = "drop") %>%
mutate(icu_patients = icu_patients / 1000)
ggplot(covid_ICU, aes(x = date_ym, y = icu_patients, fill = country)) +
geom_bar(stat = "identity", position = "dodge") +
scale_fill_viridis_d(option = "plasma", begin = 0.1, end = 0.9) +
annotate("rect", xmin = as.Date("2021-06-01"), xmax = as.Date("2021-11-01"), ymin = -Inf, ymax = Inf, alpha = 0.2, fill = "#009E73") +
annotate("rect", xmin = as.Date("2021-11-01"), xmax = as.Date("2022-02-01"), ymin = -Inf, ymax = Inf, alpha = 0.2, fill = "#999999") +
annotate("text", x = as.Date("2021-08-01"), y = 900, label = "Delta", size = 3.5) +
annotate("text", x = as.Date("2022-01-01"), y = 900, label = "Omicron", size = 3.5) +
labs(
x = "Month",
y = "ICU Patients (in thousands)",
fill = "Country"
) +
scale_x_date(
breaks = seq(as.Date("2020-01-01"), as.Date("2024-08-01"), by = "3 months"),
date_labels = "%Y-%m"
) +
theme_bw() +
theme(
axis.text.x = element_text(angle = 45, hjust = 1),
legend.position = "top"
)
